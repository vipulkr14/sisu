<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>{{ Product }} â€“ Trust Report</title>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #0d1b2a;
        color: #e0e1dd;
        line-height: 1.6;
    }

    .container {
        width: 90%;
        margin: auto;
        padding: 20px;
    }

    h1, h2, h3 {
        color: #84d2ff;
        margin-bottom: 10px;
    }

    .header {
        background: linear-gradient(to right, #1b263b, #0d1b2a);
        padding: 20px;
        border-left: 5px solid #3a86ff;
        border-radius: 6px;
        margin-bottom: 25px;
    }

    .section {
        background: #1b263b;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 6px;
        box-shadow: 0px 0px 8px rgba(58, 134, 255, 0.4);
    }

    .card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
    }

    .card {
        background: #112031;
        border-left: 4px solid #3a86ff;
        padding: 15px;
        border-radius: 6px;
    }

    .metric-value {
        font-size: 26px;
        font-weight: bold;
        color: #3a86ff;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }

    th, td {
        padding: 10px;
        border-bottom: 1px solid #33415c;
    }

    a {
        color: #84d2ff;
    }

    .image-box {
        text-align: center;
        padding: 15px;
    }

    .image-box img {
        max-width: 90%;
        border: 2px solid #3a86ff;
        border-radius: 6px;
    }

</style>
</head>

<body>
<div class="container">

    <!-- Header -->
    <div class="header">
        <h1>Trust Report: {{ Product }}</h1>
        <p><strong>Company:</strong> {{ Company }}</p>
        <p><strong>Website:</strong> <a href="{{ url }}">{{ url }}</a></p>
        <p><strong>Report Created:</strong> {{ created_at }}</p>
        <p><strong>HQ Country:</strong> {{ hq_country }}</p>
    </div>


    <!-- Trustability Score -->
    <div class="section">
        <h2>Overall Trustability</h2>
        <p class="metric-value">{{ "%.2f"|format(Trustability) }}</p>
        <p>{{ Summary }}</p>
    </div>


    <!-- Graph/Image -->
    <div class="section image-box">
        <h2>Visual Analysis</h2>
        <img src="data:image/png;base64,{{ graph_b64 }}" alt="Graph">
    </div>


    <!-- Trust Scores -->
    <div class="section">
        <h2>Trust Scores Breakdown</h2>
        <div class="card-grid">
            {% for key, value in trust_scores.items() %}
            <div class="card">
                <h3>{{ key.replace("_", " ").title() }}</h3>
                <p class="metric-value">{{ value }}</p>
            </div>
            {% endfor %}
        </div>
    </div>


    <!-- Confidence Scores -->
    <div class="section">
        <h2>Confidence Scores</h2>
        <div class="card-grid">
            {% for key, value in confidence_scores.items() %}
            <div class="card">
                <h3>{{ key.replace("_", " ").title() }}</h3>
                <p class="metric-value">{{ value }}</p>
            </div>
            {% endfor %}
        </div>
    </div>


    <!-- Sources -->
    <div class="section">
        <h2>Sources</h2>

        <h3>License Scan Sources</h3>
        <ul>
        {% for src in Sources.sources_license_scan %}
            <li>
                <strong>{{ src.description }}:</strong>
                <a href="{{ src.link }}">{{ src.link }}</a>
                <br>{{ src.extract }}
            </li>
        {% endfor %}
        </ul>

        <h3>CVE Source</h3>
        <p><a href="{{ Sources.sources_cve }}">{{ Sources.sources_cve }}</a></p>

        <h3>Product Assessment Sources</h3>
        <ul>
        {% for src in Sources.sources_assess_product %}
            <li><strong>{{ src.description }}:</strong> <a href="{{ src.link }}">{{ src.link }}</a></li>
        {% endfor %}
        </ul>
    </div>

</div>
</body>
</html>
